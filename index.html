<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Plantafel Dachdeckerei Frey</title>

<style>
body { font-family: Arial, sans-serif; margin:20px; }
h2 { margin-top:30px; }
input { padding:6px; }
button { padding:6px 10px; margin-left:5px; }

.item {
  display:inline-block;
  padding:5px 8px;
  border:1px solid #333;
  background:#eee;
  margin:4px;
  cursor:grab;
}

.month {
  border:1px dashed #999;
  min-height:40px;
  padding:6px;
  margin:5px 0;
}

.remove {
  border:2px dashed red;
  padding:15px;
  margin-top:20px;
  text-align:center;
}
</style>
</head>

<body>

<h1>Plantafel Dachdeckerei Frey</h1>

<h2>Fahrzeuge</h2>
<input id="vehicleInput">
<button id="addVehicleBtn">+</button>
<div id="vehicles"></div>

<h2>Mitarbeiter</h2>
<input id="employeeInput">
<button id="addEmployeeBtn">+</button>
<div id="employees"></div>

<h2>Projekt-Parkplatz (12 Monate)</h2>
<input id="projectInput">
<button id="addProjectBtn">Projekt +</button>

<div id="months"></div>

<div class="remove" id="trash">❌ Entfernen – hierher ziehen</div>

<script>
const state = { vehicles:[], employees:[], projects:{} };
const months = ["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"];

function uid(){ return Math.random().toString(36).slice(2); }

const vehiclesDiv = document.getElementById("vehicles");
const employeesDiv = document.getElementById("employees");
const monthsDiv = document.getElementById("months");
const trash = document.getElementById("trash");

document.getElementById("addVehicleBtn").onclick = () => {
  const v = vehicleInput.value.trim();
  if(!v) return;
  state.vehicles.push({id:uid(),name:v});
  vehicleInput.value="";
  render();
};

document.getElementById("addEmployeeBtn").onclick = () => {
  const e = employeeInput.value.trim();
  if(!e) return;
  state.employees.push({id:uid(),name:e});
  employeeInput.value="";
  render();
};

document.getElementById("addProjectBtn").onclick = () => {
  const p = projectInput.value.trim();
  if(!p) return;
  state.projects[uid()]={name:p,month:null};
  projectInput.value="";
  render();
};

function makeItem(obj,type){
  const el=document.createElement("span");
  el.className="item";
  el.textContent=obj.name;
  el.draggable=true;
  el.ondragstart=e=>{
    e.dataTransfer.setData("id",obj.id);
    e.dataTransfer.setData("type",type);
  };
  return el;
}

function render(){
  vehiclesDiv.innerHTML="";
  employeesDiv.innerHTML="";
  monthsDiv.innerHTML="";

  state.vehicles.forEach(v=>vehiclesDiv.appendChild(makeItem(v,"vehicle")));
  state.employees.forEach(e=>employeesDiv.appendChild(makeItem(e,"employee")));

  months.forEach(m=>{
    const d=document.createElement("div");
    d.className="month";
    d.innerHTML="<b>"+m+"</b>";
    d.ondragover=e=>e.preventDefault();
    d.ondrop=e=>{
      const id=e.dataTransfer.getData("id");
      if(state.projects[id]){ state.projects[id].month=m; render(); }
    };
    Object.entries(state.projects).forEach(([id,p])=>{
      if(p.month===m) d.appendChild(makeItem({id,name:p.name},"project"));
    });
    monthsDiv.appendChild(d);
  });
}

trash.ondragover=e=>e.preventDefault();
trash.ondrop=e=>{
  const id=e.dataTransfer.getData("id");
  const type=e.dataTransfer.getData("type");
  if(type==="project") delete state.projects[id];
  if(type==="vehicle") state.vehicles=state.vehicles.filter(v=>v.id!==id);
  if(type==="employee") state.employees=state.employees.filter(e=>e.id!==id);
  render();
};

render();
</script>

</body>
</html>
