<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Plantafel Dachdeckerei Frey</title>

  <link rel="stylesheet" href="style.css" />

  <!-- Supabase UMD (kein module!) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Muss window.db setzen (deine vorhandene Datei) -->
  <script src="supabase.js"></script>
</head>

<body>
  <header class="header">
    <div class="header__inner">
      <h1>Plantafel Dachdeckerei Frey</h1>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>Wochenplan – Magnettafel (4 Kalenderwochen)</h2>

      <div class="controls">
        <div class="control">
          <label for="kwStart">Start-KW</label>
          <input id="kwStart" type="number" min="1" max="53" />
        </div>

        <div class="control">
          <label>&nbsp;</label>
          <button id="btnReload" type="button" class="btn btn--secondary">Neu laden</button>
        </div>

        <div class="control">
          <label>&nbsp;</label>
          <button id="btnClearForm" type="button" class="btn btn--ghost">Leeren (nur Formular)</button>
        </div>
      </div>

      <form id="plantafel-form" class="form">
        <div class="form__grid">
          <div class="field">
            <label for="kw">KW</label>
            <input id="kw" type="number" min="1" max="53" required />
          </div>

          <div class="field">
            <label for="weekday">Wochentag</label>
            <select id="weekday" required>
              <option value="" selected>bitte wählen</option>
              <option value="Mo">Mo</option>
              <option value="Di">Di</option>
              <option value="Mi">Mi</option>
              <option value="Do">Do</option>
              <option value="Fr">Fr</option>
            </select>
          </div>

          <div class="field">
            <label for="fahrzeug">Fahrzeug</label>
            <select id="fahrzeug" required>
              <option value="" selected>bitte wählen</option>
              <option value="DOKA">DOKA</option>
              <option value="MERCEDES BUS">MERCEDES BUS</option>
              <option value="CRAFTER">CRAFTER</option>
              <option value="FORD">FORD</option>
            </select>
          </div>

          <div class="field field--wide">
            <label for="titel">Titel</label>
            <input id="titel" type="text" placeholder="z.B. Dachsanierung Müller" required />
          </div>

          <div class="field">
            <label for="baustelle">Baustelle</label>
            <input id="baustelle" type="text" placeholder="Ort / Objekt" />
          </div>

          <div class="field">
            <label for="mitarbeiter">Mitarbeiter</label>
            <input id="mitarbeiter" type="text" placeholder="z.B. Thomas, Meier" />
          </div>

          <div class="field">
            <label for="status">Status</label>
            <select id="status">
              <option value="normal" selected>normal</option>
              <option value="wichtig">wichtig</option>
              <option value="fix">fix</option>
              <option value="offen">offen</option>
            </select>
          </div>

          <div class="field field--wide">
            <label for="notiz">Notiz</label>
            <textarea id="notiz" rows="2" placeholder="Kurzinfo / Material / Zeiten"></textarea>
          </div>
        </div>

        <div class="form__actions">
          <button type="submit" class="btn btn--primary">Speichern</button>
        </div>
      </form>
    </section>

    <section class="card">
      <div class="board__head">
        <h2>Magnettafel – Wochenübersicht</h2>
        <div class="hint">Drag & Drop: Karte in ein anderes Feld ziehen → wird gespeichert.</div>
      </div>

      <div id="board" class="weeks"></div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
