<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Plantafel Dachdeckerei Frey</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="header">
  <div class="header-title">Plantafel Dachdeckerei Frey</div>
</div>

<!-- ================= MAGNETKASTEN ================= -->

<div class="magnetkasten">
  <h3>Mitarbeiter</h3>

  <div class="form-row">
    <input id="ma-name" placeholder="Name">
    <input id="ma-kuerzel" placeholder="Kürzel">
    <button class="primary" onclick="addMitarbeiter()">+ Hinzufügen</button>
  </div>

  <div id="mitarbeiter-liste"></div>
</div>

<div class="magnetkasten">
  <h3>Fahrzeuge</h3>

  <div class="form-row">
    <input id="fz-name" placeholder="Fahrzeug">
    <button class="primary" onclick="addFahrzeug()">+ Hinzufügen</button>
  </div>

  <div id="fahrzeug-liste"></div>
</div>

<!-- ================= LÖSCHBEREICH ================= -->

<div class="delete-zone"
     ondragover="allowDrop(event)"
     ondrop="deleteMagnet(event)">
  Zieh Magnete hierher zum Löschen
</div>

<!-- ================= PLANTAFEL ================= -->

<div class="plantafel">

  <div class="kalenderwoche">
    <div class="kw-title">KW 50</div>

    <div class="tag">
      <div class="tag-title">Montag</div>
      <div class="dropzone" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
    </div>

    <div class="tag">
      <div class="tag-title">Dienstag</div>
      <div class="dropzone" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
    </div>
  </div>

  <div class="kalenderwoche">
    <div class="kw-title">KW 51</div>

    <div class="tag">
      <div class="tag-title">Montag</div>
      <div class="dropzone" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
    </div>

    <div class="tag">
      <div class="tag-title">Dienstag</div>
      <div class="dropzone" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
    </div>
  </div>

</div>

<!-- ================= SCRIPT ================= -->

<script>
let dragItem = null;

/* ---------- Drag & Drop ---------- */

function drag(ev) {
  dragItem = ev.target;
}

function allowDrop(ev) {
  ev.preventDefault();
}

function drop(ev) {
  ev.preventDefault();
  if (dragItem) {
    ev.target.appendChild(dragItem);
    dragItem = null;
  }
}

function deleteMagnet(ev) {
  ev.preventDefault();
  if (dragItem) {
    dragItem.remove();
    dragItem = null;
  }
}

/* ---------- Mitarbeiter ---------- */

function addMitarbeiter() {
  const name = document.getElementById('ma-name').value;
  const kuerzel = document.getElementById('ma-kuerzel').value;

  if (!name || !kuerzel) return;

  const div = document.createElement('div');
  div.className = 'magnet mitarbeiter';
  div.draggable = true;
  div.ondragstart = drag;
  div.innerHTML = `${name} <span class="kuerzel">${kuerzel}</span>`;

  document.getElementById('mitarbeiter-liste').appendChild(div);

  document.getElementById('ma-name').value = '';
  document.getElementById('ma-kuerzel').value = '';
}

/* ---------- Fahrzeuge ---------- */

function addFahrzeug() {
  const name = document.getElementById('fz-name').value;
  if (!name) return;

  const div = document.createElement('div');
  div.className = 'magnet fahrzeug';
  div.draggable = true;
  div.ondragstart = drag;
  div.textContent = name;

  document.getElementById('fahrzeug-liste').appendChild(div);
  document.getElementById('fz-name').value = '';
}
</script>

</body>
</html>
