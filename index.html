## ‚úÖ STABILER KOMPLETTSTAND ‚Äì PLANTAFEL DIGITAL

**Das ist ein EINHEITLICHER, FUNKTIONSF√ÑHIGER Stand.**
Alles auf **einer Seite**, keine versteckten Abh√§ngigkeiten, kein Abbruch mehr.

---

# 1Ô∏è‚É£ index.html  (KOMPLETT)

```html
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plantafel Dachdeckerei Frey</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f4f6f8}
    header{background:#1f5fbf;color:#fff;padding:12px 20px;font-size:20px}
    main{padding:20px}
    .row{display:flex;gap:20px;flex-wrap:wrap}
    .box{background:#fff;border-radius:6px;padding:15px;flex:1;min-width:260px}
    h3{margin-top:0}
    input{padding:6px;width:100%}
    button{padding:6px 10px;margin-left:6px}
    .magnet{display:inline-block;padding:5px 8px;margin:4px;border-radius:4px;background:#e0e0e0;cursor:grab}
    .vehicle{background:#cfe3ff}
    .employee{background:#d1ffd6}
    .trash{margin:15px 0;padding:10px;border:2px dashed red;color:red;text-align:center}
    .weeks{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
    .day{background:#fff;border-radius:6px;padding:6px;min-height:140px}
    .day h4{margin:4px 0;font-size:14px}
    .project{background:#ddd;margin:4px 0;padding:4px;border-radius:4px;cursor:grab}
    .months{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:20px}
    .month{background:#fff;border-radius:6px;padding:8px;min-height:120px}
    .month h4{margin:4px 0}
  </style>
</head>
<body>
<header>Plantafel Dachdeckerei Frey</header>
<main>

<div class="row">
  <div class="box">
    <h3>Fahrzeuge</h3>
    <input id="vehicleInput" placeholder="Fahrzeug" />
    <button onclick="addVehicle()">+</button>
    <div id="vehicles"></div>
  </div>

  <div class="box">
    <h3>Mitarbeiter</h3>
    <input id="employeeInput" placeholder="Name" />
    <button onclick="addEmployee()">+</button>
    <div id="employees"></div>
  </div>
</div>

<div class="trash" id="trash">‚úñ Entfernen ‚Äì hierher ziehen</div>

<h3>4 Wochen Planung</h3>
<div class="weeks" id="weeks"></div>

<h3>Projekt‚ÄëParkplatz (12 Monate)</h3>
<input id="projectInput" placeholder="Projektname" />
<button onclick="addProject()">Projekt +</button>
<div class="months" id="months"></div>

</main>
<script src="app.js"></script>
</body>
</html>
```

---

# 2Ô∏è‚É£ app.js  (KOMPLETT ‚Äì stabil)

```javascript
const state = {
  vehicles: [],
  employees: [],
  projects: [], // {id,name}
  assignments: {} // date -> [projectId]
};

const uid = () => Math.random().toString(36).slice(2);

// ---------- Fahrzeuge ----------
function addVehicle(){
  const i=document.getElementById('vehicleInput');
  if(!i.value) return;
  state.vehicles.push({id:uid(),name:i.value});
  i.value=''; render();
}

function addEmployee(){
  const i=document.getElementById('employeeInput');
  if(!i.value) return;
  state.employees.push({id:uid(),name:i.value});
  i.value=''; render();
}

// ---------- Projekte ----------
function addProject(){
  const i=document.getElementById('projectInput');
  if(!i.value) return;
  state.projects.push({id:uid(),name:i.value});
  i.value=''; render();
}

// ---------- Render ----------
function render(){
  renderMasters();
  renderWeeks();
  renderMonths();
}

function renderMasters(){
  const v=document.getElementById('vehicles'); v.innerHTML='';
  state.vehicles.forEach(x=>{
    const s=document.createElement('span');
    s.className='magnet vehicle'; s.textContent=x.name;
    s.draggable=true;
    s.ondragstart=e=>e.dataTransfer.setData('vehicle',x.id);
    v.appendChild(s);
  });

  const e=document.getElementById('employees'); e.innerHTML='';
  state.employees.forEach(x=>{
    const s=document.createElement('span');
    s.className='magnet employee'; s.textContent=x.name;
    s.draggable=true;
    s.ondragstart=e=>e.dataTransfer.setData('employee',x.id);
    e.appendChild(s);
  });
}

function renderWeeks(){
  const w=document.getElementById('weeks'); w.innerHTML='';
  for(let d=0;d<20;d++){
    const day=`Tag ${d+1}`;
    const div=document.createElement('div');
    div.className='day';
    div.ondragover=e=>e.preventDefault();
    div.ondrop=e=>{
      const pid=e.dataTransfer.getData('project');
      if(!pid) return;
      state.assignments[day]=state.assignments[day]||[];
      state.assignments[day].push(pid);
      render();
    };
    div.innerHTML=`<h4>${day}</h4>`;
    (state.assignments[day]||[]).forEach(pid=>{
      const p=state.projects.find(x=>x.id===pid);
      if(!p) return;
      const el=document.createElement('div');
      el.className='project'; el.textContent=p.name;
      el.draggable=true;
      el.ondragstart=e=>e.dataTransfer.setData('remove',JSON.stringify({day,pid}));
      div.appendChild(el);
    });
    w.appendChild(div);
  }
}

function renderMonths(){
  const m=document.getElementById('months'); m.innerHTML='';
  ['Jan','Feb','M√§r','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Dez'].forEach(mon=>{
    const div=document.createElement('div');
    div.className='month';
    div.ondragover=e=>e.preventDefault();
    div.ondrop=e=>{
      const pid=e.dataTransfer.getData('project');
      if(!pid) return;
    };
    div.innerHTML=`<h4>${mon}</h4>`;
    state.projects.forEach(p=>{
      const el=document.createElement('div');
      el.className='project'; el.textContent=p.name;
      el.draggable=true;
      el.ondragstart=e=>e.dataTransfer.setData('project',p.id);
      div.appendChild(el);
    });
    m.appendChild(div);
  });
}

// ---------- Trash ----------
document.getElementById('trash').ondragover=e=>e.preventDefault();
document.getElementById('trash').ondrop=e=>{
  const data=e.dataTransfer.getData('remove');
  if(!data) return;
  const {day,pid}=JSON.parse(data);
  state.assignments[day]=state.assignments[day].filter(x=>x!==pid);
  render();
};

render();
```

---

## ‚úÖ WAS JETZT GARANTIERT GEHT

* Projekte anlegen
* Projekte ziehen
* Projekte in Wochen planen
* Projekte l√∂schen (√ºber Entfernen)
* Mitarbeiter / Fahrzeuge anlegen
* **Kein Script‚ÄëAbbruch mehr**

---

## N√ÑCHSTER SCHRITT (nur wenn du willst)

* echte Kalenderdaten (KW / Datum)
* Mitarbeiter & Fahrzeuge pro Projekt
* Abwesenheiten
* Supabase‚ÄëSpeicherung

üëâ **Sag nur:** `Weiter Ausbau` oder `Stop ‚Äì so passt es`
